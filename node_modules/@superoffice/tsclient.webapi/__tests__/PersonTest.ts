// import {expect} from 'chai'
import * as assert from "assert";
import axios from "axios";
import nock = require("nock");
import { PersonAgent } from "../src/PersonAgent";

const host: string = "http://localhost/";

axios.defaults.baseURL = host;

describe("WebAPI Person tests", () => {
	it("Can get a person image using a request object", done => {
		let scopes = nock.load(__dirname + "/PersonImageData.nock");
		// let scope = nock(host)
		// .post('/api/v1/Agents/Person/GetPersonImage')
		// .reply(200, "0xbadbeef");

		let agent = new PersonAgent(host);
		agent.GetPersonImage({ PersonId: 147 }).then(response => {
			assert.notEqual(null, response);
			response = response as ArrayBuffer;
			assert.equal(response.byteLength, 1520);
			done();
		});
	});

	it("Can get a person image using a parameter", done => {
		let scopes = nock.load(__dirname + "/PersonImageData.nock");
		// let scope = nock(host)
		// .post('/api/v1/Agents/Person/GetPersonImage')
		// .reply(200, "0xbadbeef");

		let agent = new PersonAgent(host);
		agent.GetPersonImage(147).then(response => {
			assert.notEqual(null, response);
			response = response as ArrayBuffer;
			assert.equal(response.byteLength, 1520);
			done();
		});
	});
});
